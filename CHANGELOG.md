# 项目迭代与变更日志

## [Iteration 1] - 2026-02-26
### 初始化项目
- 使用 Vite + React + TypeScript 初始化前端项目。
- 安装并配置 Tailwind CSS (v3)。
- 手动配置 shadcn UI 基础结构。
- 构建“幼苗读书打卡”原型页面。

## [Iteration 2] - 2026-02-26
### MVP 极简适老版首页
- 按钮 ≥ 50px，文字 ≥ 30px。
- 实现每日古诗展示卡片与一键打卡。
- 自动化提取 12 首经典古诗内容。

## [Iteration 3] - 2026-02-26
### UI 极简回归与纯净版
- 移除外部图片，回归“Emoji + 超大文字”风格。

## [Iteration 4] - 2026-02-26
### 终极极简版
- 诗句字号提升至 42px，专注朗诵与记忆。

## [Iteration 5] - 2026-02-26
### 扩展唐诗三百首完整库
- 集成 80+ 首核心唐诗全文，优化数据轮换算法。

## [Iteration 6] - 2026-02-26
### 引入路由管理
- 集成 `react-router-dom`，划分 `pages` 目录。

## [Iteration 7] - 2026-02-26
### 自适应多标签导航 (Tabs)
- 实现 `AppLayout`：移动端底部悬浮胶囊，桌面端顶部导航。

## [Iteration 8] - 2026-02-26
### 科技感重构与自适应布局修复
- 全面切换至赛博科技感主题，使用 shadcn UI 替换原有组件。

## [Iteration 9] - 2026-02-26
### 多主题支持：科技风与童趣风
- 引入 `ThemeProvider`，支持全局主题实时切换与持久化。

## [Iteration 10] - 2026-02-26
### 深度风格差异化优化
- 科技风对齐 Railway，童趣风对齐 Google I/O。

## [Iteration 11] - 2026-02-26
### 品牌级风格精确适配 (Railway & Vercel)
- 科技风精确匹配 Railway.com，卡通风精确匹配 Vercel。

## [Iteration 12] - 2026-02-26
### 科技主题标准化重构 (Railway 风格)
- **视觉规范**: 背景 #0a0a0a，主色 #7c3aed，圆角 12px。
- **氛围增强**: AppLayout 集成手绘紫色云彩背景。
- **内容重塑**: Home 页面重塑为“Ship software peacefully”专业 Landing Page。

## [Iteration 13] - 2026-02-26
### 代码清理与稳定性修复
- **清理重复代码**: 彻底删除 Home.tsx 中的乱码与重复组件。
- **错误修复**: 解决由于多次合并导致的 Parsing Error，恢复 HMR 功能。

## [Iteration 14] - 2026-02-26
### 童趣风重塑：极简主义 + AI 科技风 (Vercel Style)
- **设计语言**: 纯白背景 (#ffffff) + 深黑文字 (#111827) + 极简几何图形。
- **背景特效**: 引入放射状彩色渐变 (橙→黄→绿→青) 与极简同心圆细线背景。
- **组件对齐**:
  - **按钮**: 黑色填充主按钮带三角图标，白色边框次级按钮。
  - **排版**: 使用 Inter 字体，标题 72px 粗体，高留白设计。
- **全站适配**: 重构 Stats、Library、Profile 页面，统一为 AI Cloud 极简风格。
- **体验修复**: 彻底修复科技风主题下文字颜色与背景相近的问题，确保深色模式下文字始终为白色。

## [Iteration 17] - 2026-02-26
### 视觉对比度与全站中文化
- **修复文字不可见问题**: 彻底解决了在“明媚日 (Day)”模式下，“静谧夜 (Night)”按钮标签因颜色硬编码为白色而无法看清的问题。
- **全站中文化重塑**: 响应用户需求，移除了全站所有页面（首页、统计、诗库、个人中心）中的英文文案及装饰性技术术语。
  - **文案替换**: 将“Hero”区域、按钮、统计单位、搜索占位符等全部替换为更具诗意的中文描述。
  - **装饰文字**: 统一将版本号和系统状态等装饰文案改为中文（如“版本 1.0”、“研习模块已激活”）。
- 对比度逻辑优化: 在 Profile 页面引入了更健壮的条件渲染逻辑，确保所有未选中的主题标签都能根据当前背景色自动调整对比度。

## [Iteration 20] - 2026-02-26
### 智能日夜切换与导航重构
- **自动主题切换**: 增强了 `ThemeProvider`，实现了基于系统时间的自动切换逻辑（18:00 - 06:00 为静谧夜模式，其余时间为明媚日模式）。
- **手动覆盖机制**: 支持用户手动切换主题，手动操作将暂时覆盖自动逻辑，并持久化存储偏好。
- **导航栏集成**: 
  - 将主题切换器从“个人中心”移至顶部导航栏最右侧，方便用户在任何页面快速切换。
  - 切换器采用极简图标设计（太阳/月亮），并带有状态指示灯显示当前是否处于自动模式。
- **界面精简**: 移除了 Profile 页面中冗余的主题切换模块，保持页面聚焦于账户管理。

## [Iteration 21] - 2026-02-26
### 亲子互动与分享体验升级
- **分享功能重构**: 
  - 打卡成功后的主操作按钮从“前往成就中心”调整为 **“一键分享微信群”**。
  - 在白天模式下，分享按钮采用微信品牌色 (`#07C160`)，增强识别度与操作暗示。
- **文案情感化升级**: 
  - 弹窗描述修改为家长视角：**“宝贝今天背会了《XXX》！学习足迹已同步，快分享给家人看看吧。”**
  - 分享内容增加 Emoji 装饰（🌟, 📖），使其在社交群聊中更具感染力。
- **职责分离验证**: 进一步强化了打卡页面作为学习终点的属性，将“查看数据”作为次要路径，优先鼓励社交分享与成就激励。

## [Iteration 23] - 2026-02-26
### 三模主题切换系统重构
- **三种显式模式**: 重构了主题管理逻辑，现在支持 **“明媚日”**、**“静谧夜”** 和 **“自适应”** 三种显式模式。
- **单图标循环交互**: 
  - 导航栏切换器现在仅展示一个图标，代表当前激活的模式（太阳代表日间，月亮代表夜间，星光代表自适应）。
  - 点击图标可按顺序循环切换：**自适应 -> 日间 -> 夜间 -> 自适应**。
- **默认自适应**: 初始化默认进入自适应模式，严格按照系统时间（18:00 - 06:00）自动匹配最佳研习氛围。
- **状态感知增强**: 在自适应模式下，图标右上角会显示闪烁的 `AUTO` 标识，确保用户随时掌握系统的智能状态。

## [Iteration 24] - 2026-02-26
### 诵读打卡闭环：意境考试功能上线
- **功能逻辑重构**: 
  - 将原有的“确认诵读完成”直接打卡流程，改为 **“开始考试”** 前置环节。
  - 用户需通过“意境考核”才能最终达成打卡，增加了学习的趣味性与交互深度。
- **考试系统实现**:
  - **意境考核 UI**: 引入了“四选一”图片选择界面，系统根据当前诗词标题与语境模拟生成 4 张不同风格的意境图。
  - **交互体验**: 支持点击图片快速选择，伴随缩放动效与字母标识（A/B/C/D），增强考试仪式感。
- **成功反馈优化**: 只有在完成意境选择后，才会触发最终的打卡成功弹窗与微信一键分享功能。

## [Iteration 25] - 2026-02-26
### Flash 动画播放支持 (Modern SWF Support)
- **集成 Ruffle 仿真器**: 通过在 `index.html` 中集成 Ruffle，实现了在现代化浏览器中无插件播放 Flash (SWF) 文件的能力。
- **FlashPlayer 组件**: 创建了通用的 [FlashPlayer.tsx](file:///e:/code/punch-in-time/punch-in-time/src/components/shared/FlashPlayer.tsx) 组件，支持加载动画、状态处理（加载中、播放控制、错误提示）及日夜主题适配。
- **打卡页动画集成**: 
  - 在打卡页面新增了 **“观看动画”** 入口，允许家长和孩子通过生动的 SWF 动画更直观地研习古诗词。
  - 支持动画与诗词卡片的无缝切换，提升了研习的趣味性与互动性。
- **资源优化**: 建立了 `public/swf` 目录，确保 SWF 资源能以最高性能在浏览器中直接加载。
- 主题切换稳定性: 优化了主题切换按钮的视觉反馈，确保在日夜交替时，选中的状态依然清晰可辨。

## [Iteration 18] - 2026-02-26
### 打卡路由与页面交互升级
- **新增打卡页面**: 创建了独立的 [PunchIn.tsx](file:///e:/code/punch-in-time/punch-in-time/src/pages/PunchIn.tsx) 页面，专门用于展示今日诗词并进行打卡操作。
- **路由逻辑优化**:
  - 在 `App.tsx` 中新增 `/punch-in` 路由。
  - 首页按钮逻辑重构：
    - “开始研习/立即诵读”统一修改为 **“开始学习”**，并跳转至打卡页面。
    - “查看成就/探索诗库”部分按钮统一修改为 **“查看成就”**，并跳转至统计页面。
- **视觉一致性**: 打卡页面完美继承了日夜模式（静谧夜/明媚日）的视觉风格与品牌标识。

## [Iteration 19] - 2026-02-26
### 首页布局优化与职责分离
- **移除首页古诗模块**: 为了将“浏览”与“学习”职责分离，首页不再直接展示每日古诗，而是作为一个纯粹的品牌入口与导航中心。
- **Hero 区域重塑**: 
  - 首页现在聚焦于核心标语、日夜模式描述以及两个超大行动按钮（CTA）。
  - 按钮样式升级：增大尺寸（h-64）与字体，增强交互点击感。
- **布局居中优化**: 使用 `justify-center` 和 `min-h-[80vh]` 确保首页内容在视觉上保持居中平衡，提升品牌高级感。
